'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _immutableObjectMethods = require('immutable-object-methods');

exports.default = function (getNameAndVersion) {
  return function (packageJson, args) {
    return Promise.all(args.map(getNameAndVersion)).then(function (rows) {
      var result = packageJson;
      rows.forEach(function (_ref) {
        var name = _ref.name;
        var version = _ref.version;

        if (packageJson.devDependencies) {
          result = (0, _immutableObjectMethods.set)(result, 'devDependencies', (0, _immutableObjectMethods.without)(packageJson.devDependencies, name));
        }
        result = (0, _immutableObjectMethods.setIn)(result, ['dependencies', name], version);
      });
      return result;
    });
  };
};